# 电影分镜拆解方法论

## 核心原理

### 三不变原则
电影分镜设计的基础是确保每个镜头内的三个要素保持不变：

#### 1. 空间不变
- **同一镜头内的画面必须在同一空间**
- 不能从"广场"切到"石阶"，不能从"屋内"切到"屋外"
- 若空间发生变化，必须切换到下一个scene_id
- 空间的判定标准：观众视角下的地理位置是否一致

#### 2. 时间不变
- **start和end必须处于同一时间段**
- 不能从早上跨到晚上，不能从白天跨到夜晚
- 短暂的连续动作视作同一时间
- 时间跨度超过2-3分钟的必须分镜

#### 3. 动作连贯
- **一个镜头呈现一条连续的动作链**
- 例：伸手→手贴在石碑上，抬头→目光变得坚定
- 不要在一个镜头里塞两段不连续的事件
- 动作链的判定：是否为同一个意图下的连续行为

## 分镜拆分流程

### 第一步：文本分析（完整提取）
1. **识别场景边界**：找出所有※场景标记
2. **标记时间节点**：识别明显的时间跳跃
3. **提取动作序列**：将连续动作组织成链条（每个△都要处理）
4. **【新增】提取所有对白**：
   - 主角对白
   - 配角对白（仙神甲、仙神乙、天兵甲等）
   - 【独白】内心独白
5. **【新增】提取特效音效**：
   - 所有【音效】标记
   - 所有【特效】标记
   - 所有【系统面板】标记
6. **匹配对白位置**：确定对白与动作的对应关系

### 第二步：镜头规划（完整性优先）
1. **【重要修改】镜头数量不设上限**：必须完整演绎剧本所有内容，可能需要20-50个甚至更多镜头
2. **【强制要求】零遗漏原则**：
   - 剧本中的每个※场景必须转化为镜头
   - 每个△视觉描述必须体现在镜头中
   - 每句对话（包括配角）必须有对应镜头
   - 每个【音效】【特效】必须在镜头中体现
   - 每个【独白】必须保留
3. **分配内容密度**：每镜头承载1-2秒的视频内容
4. **设计转场逻辑**：确保镜头间的流畅衔接
5. **平衡视觉节奏**：避免单调或过于密集

### 第三步：双帧设计
1. **Start帧设计**：动作的起点，情绪的酝酿
2. **End帧设计**：动作的结果，情绪的落点
3. **确保连贯性**：两帧间必须是自然的延续
4. **避免跳跃**：不允许构图或情绪的突然转换

## 镜头类型选择策略

### 基于情绪的选择
- **Wide Shot (远景)**：建立环境，表现孤独、宏大
- **Full Shot (全景)**：展现角色全身，适合动作场面
- **Medium Shot (中景)**：日常对话，情感交流的主力
- **Close-up (特写)**：强烈情绪，重要对白
- **Extreme Close-up (大特写)**：极致情绪，关键细节

### 基于叙事的选择
- **建立镜头**：使用Wide Shot介绍新场景
- **反应镜头**：Close-up捕捉角色情绪变化
- **细节镜头**：Extreme Close-up突出重要物品
- **过渡镜头**：Medium Shot维持叙事流畅

## 摄像机运动设计

### 运动类型与情感表达
- **Push in (推进)**：加强紧张感，引导注意力
- **Pull back (拉远)**：揭示真相，营造震撼
- **Pan (摇摆)**：跟随动作，连接空间关系
- **Tilt (倾斜)**：表现不稳定，心理失衡
- **Track (跟踪)**：动感强烈，沉浸感强
- **Static (静止)**：稳定客观，适合对话

### 角度选择策略
- **Eye-level (平视)**：客观中性，日常对话
- **Low-angle (仰角)**：威严、压迫、崇拜
- **High-angle (俯角)**：脆弱、渺小、上帝视角
- **3/4 view (四分之三角度)**：立体感强，适合人物特写

## 关键帧描述规范

### Action描述原则
- **Start帧**：动作的起始状态，准备阶段
- **End帧**：动作完成后的状态，情绪落点
- 使用现在时，一句话概括定格动作
- 避免过程描述，专注于状态描述

### Character_layout标准格式
- **距离层次**：前景→中景→远景的空间分布
- **水平位置**：左侧→中央→右侧的画面分布
- **朝向关系**：面对、背对、侧身等相对关系
- **动作状态**：站立、坐下、行走等姿态描述

示例：
```
"前景偏左是李言初，低头站立，双手在身前；中景偏右是陈家三小姐，微微侧身看向他；远处虚化的人群构成背景。"
```

### Background_pure规范要求
- **纯环境描述**：不出现任何人物
- **空间要素**：地面、建筑、天空、光线
- **材质质感**：青石、木质、布料等具体材质
- **氛围营造**：明亮、昏暗、雾蒙等环境特点

示例：
```
"魏县城门外的宽阔青石广场，地面由大块青石铺就，远处是高耸的城门和连绵城墙，屋檐飞角层层叠叠，天空湛蓝，点缀几缕白云，整体光线明亮柔和。"
```

## 对白匹配原则（包含所有角色）

### 对白选择标准
- **时间匹配**：对白发生的时间点与镜头时间一致
- **【修改】数量不限**：每镜头可包含0-N句对白，确保完整性
- **【新增】配角对白必须保留**：
  - 仙神甲、仙神乙、天兵甲、天兵乙等所有配角的对话都要转化为镜头
  - 配角对话可以用远景或群像镜头呈现
  - 示例：【天兵甲】窃窃私语 → 镜头：远景，围观天兵中有人交头接耳
- **【新增】独白必须保留**：
  - 剧本中的【独白】标记要在dialogues字段中体现
  - speaker标记为"独白"或角色名+独白
- **情绪呼应**：对白情绪与画面情绪协调
- **不得创造**：严格从剧本中提取

### 特效音效处理
- **【新增】音效必须体现**：
  - 剧本中的【音效】标记要在sound_effects字段中记录
  - 在action中描述音效对应的视觉呈现（震颤、波纹、人物反应等）
- **【新增】特效必须详细**：
  - 剧本中的【特效】标记要在visual_effects字段中记录
  - 在action和ai_prompt中详细描述特效的形态、颜色、强度、运动

### 空对白处理
- 若该镜头时间点无对白，使用空数组[]
- 不强行匹配不合适的对白
- 优先保证画面与对白的逻辑一致性

## 质量检查要点

### 逻辑一致性
- [ ] 每个镜头的start/end属于同一空间时间
- [ ] 动作链完整无跳跃
- [ ] 对白与画面时间点匹配
- [ ] 情绪变化自然合理

### 技术规范性
- [ ] JSON格式完全正确
- [ ] 所有必需字段完整
- [ ] scene_id编号连续
- [ ] 摄影参数专业准确

### 视觉表现力
- [ ] 镜头选择符合情绪表达
- [ ] 构图变化丰富有趣
- [ ] 人物站位清晰可执行
- [ ] 背景描述独立完整

这套方法论确保了从文本到分镜的专业转换，为后续的影视制作提供了坚实的基础。